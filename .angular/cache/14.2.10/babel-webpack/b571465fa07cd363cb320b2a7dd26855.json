{"ast":null,"code":"import _classCallCheck from \"E:/FinalWeb_NoLogin/HotelProject/project/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"E:/FinalWeb_NoLogin/HotelProject/project/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport * as i0 from '@angular/core';\nimport { forwardRef, Directive, Attribute, NgModule } from '@angular/core';\nimport { NG_VALIDATORS } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nvar ValidateEqualDirective = /*#__PURE__*/(function () {\n  var ValidateEqualDirective = /*#__PURE__*/function () {\n    function ValidateEqualDirective(otherControl) {\n      _classCallCheck(this, ValidateEqualDirective);\n\n      this.otherControl = otherControl;\n      this.valueChangesSub = new Subscription();\n    }\n\n    _createClass(ValidateEqualDirective, [{\n      key: \"ngOnDestroy\",\n      value: function ngOnDestroy() {\n        if (this.valueChangesSub) {\n          this.valueChangesSub.unsubscribe();\n        }\n      }\n    }, {\n      key: \"validate\",\n      value: function validate(selfControl) {\n        var _this = this;\n\n        var selfControlValue = selfControl.value;\n        var otherControl = selfControl.root.get(this.otherControl);\n\n        if (!otherControl) {\n          throw new Error('ng-validate-equal: \"otherControl\" is not defined, please pass the name of the main field to the directive put on the secondary field like this example: ngValidateEqual=\"passwordFieldName\"');\n        }\n\n        if (this.valueChangesSub) {\n          this.valueChangesSub.unsubscribe();\n        } // this code works when user types in other control putting the error in self control\n\n\n        this.valueChangesSub = otherControl.valueChanges.subscribe(function (otherControlValue) {\n          if (!_this.isEqual(selfControlValue, otherControlValue) && (selfControl.touched || selfControl.dirty)) {\n            selfControl.setErrors({\n              notEqual: true\n            });\n          } else {\n            if (selfControl.errors && selfControl.hasError('notEqual')) {\n              delete selfControl.errors['notEqual'];\n\n              if (!Object.keys(selfControl.errors).length) {\n                selfControl.setErrors(null);\n              }\n            }\n          }\n        }); // this code works when the user types in self control putting the error in self control\n\n        if (!this.isEqual(selfControlValue, otherControl.value) && (selfControl.touched || selfControl.dirty)) {\n          return {\n            notEqual: true\n          };\n        }\n\n        return null;\n      }\n    }, {\n      key: \"isEqual\",\n      value: function isEqual(val1, val2) {\n        val1 = this.unifyEmptyStrings(val1);\n        val2 = this.unifyEmptyStrings(val2);\n        return val1 === val2;\n      }\n    }, {\n      key: \"unifyEmptyStrings\",\n      value: function unifyEmptyStrings(val) {\n        var isDefined = this.isDefined;\n\n        if (val === null || !isDefined(val)) {\n          val = '';\n        }\n\n        return val;\n      }\n    }, {\n      key: \"isDefined\",\n      value: function isDefined(value) {\n        var defaultUndefined = void 0;\n        return value !== defaultUndefined;\n      }\n    }]);\n\n    return ValidateEqualDirective;\n  }();\n\n  ValidateEqualDirective.ɵfac = function ValidateEqualDirective_Factory(t) {\n    return new (t || ValidateEqualDirective)(i0.ɵɵinjectAttribute('ngValidateEqual'));\n  };\n\n  ValidateEqualDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: ValidateEqualDirective,\n    selectors: [[\"\", \"ngValidateEqual\", \"\"]],\n    features: [i0.ɵɵProvidersFeature([{\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(function () {\n        return ValidateEqualDirective;\n      }),\n      multi: true\n    }])]\n  });\n  return ValidateEqualDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nvar ValidateEqualModule = /*#__PURE__*/(function () {\n  var ValidateEqualModule = /*#__PURE__*/_createClass(function ValidateEqualModule() {\n    _classCallCheck(this, ValidateEqualModule);\n  });\n\n  ValidateEqualModule.ɵfac = function ValidateEqualModule_Factory(t) {\n    return new (t || ValidateEqualModule)();\n  };\n\n  ValidateEqualModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: ValidateEqualModule\n  });\n  ValidateEqualModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [[]]\n  });\n  return ValidateEqualModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\r\n * Public API Surface of ng-validate-equal\r\n */\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\n\nexport { ValidateEqualDirective, ValidateEqualModule }; //# sourceMappingURL=ng-validate-equal.js.map","map":null,"metadata":{},"sourceType":"module"}