{"ast":null,"code":"import _classCallCheck from \"E:/FinalWeb_NoLogin/HotelProject/project/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"E:/FinalWeb_NoLogin/HotelProject/project/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction LoginComponent_nav_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"nav\", 24)(1, \"a\", 25);\n    i0.ɵɵtext(2, \"UMD Royal Rooms\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 26);\n    i0.ɵɵelement(4, \"span\", 27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 28)(6, \"div\", 29)(7, \"a\", 30);\n    i0.ɵɵtext(8, \"LOGIN\");\n    i0.ɵɵelementStart(9, \"span\", 31);\n    i0.ɵɵtext(10, \"(current)\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"a\", 32);\n    i0.ɵɵtext(12, \"REGISTER\");\n    i0.ɵɵelementEnd()()()();\n  }\n}\n\nfunction LoginComponent_div_25_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Note: E-mail must be filled \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_25_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Note: Invalid E-mail Address \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, LoginComponent_div_25_div_1_Template, 2, 0, \"div\", 18);\n    i0.ɵɵtemplate(2, LoginComponent_div_25_div_2_Template, 2, 0, \"div\", 18);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    var _r2 = i0.ɵɵreference(24);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r2.errors == null ? null : _r2.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r2.errors == null ? null : _r2.errors.pattern);\n  }\n}\n\nfunction LoginComponent_div_32_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Note: password Name must be filled \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_32_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Note: Inavlid password \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, LoginComponent_div_32_div_1_Template, 2, 0, \"div\", 18);\n    i0.ɵɵtemplate(2, LoginComponent_div_32_div_2_Template, 2, 0, \"div\", 18);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    var _r4 = i0.ɵɵreference(31);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r4.errors == null ? null : _r4.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r4.errors == null ? null : _r4.errors.pattern);\n  }\n}\n\nexport var LoginComponent = /*#__PURE__*/(function () {\n  var LoginComponent = /*#__PURE__*/function () {\n    function LoginComponent(http, router) {\n      _classCallCheck(this, LoginComponent);\n\n      this.http = http;\n      this.router = router;\n      this.isUserLoggedIn = false;\n      this.retUrl = \"home\";\n      this.headers = new HttpHeaders().set(\"Content-Type\", \"application/json\");\n    }\n\n    _createClass(LoginComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this = this;\n\n        this.activatedRoute.queryParamMap.subscribe(function (params) {\n          _this.retUrl = params.get('retUrl');\n          console.log('LoginComponent/ngOnInit ' + _this.retUrl);\n        });\n      }\n    }, {\n      key: \"login\",\n      value: function login(frm) {\n        var _this2 = this;\n\n        console.log(\"function calling\", frm.value);\n        this.http.post(\"http://localhost:4906/api/login\", frm.value, {\n          headers: this.headers\n        }).subscribe(function (data) {\n          console.log(data);\n          _this2.logindata = data;\n\n          if (_this2.logindata.status === 'ok') {\n            _this2.isUserLoggedIn = true;\n\n            if (_this2.retUrl != null) {\n              _this2.router.navigate(['/login']);\n            } else {\n              _this2.router.navigate(['/home']);\n            }\n          } else if (_this2.logindata.status === 'invalidpwd') {\n            _this2.isUserLoggedIn = false;\n            alert(\"Invalid password\");\n          } else {\n            _this2.isUserLoggedIn = false;\n            alert(\"InvalidLogin\");\n          }\n        });\n      }\n    }, {\n      key: \"CanActivate\",\n      value: function CanActivate(route, state) {\n        var isAuthenticated = this.isUserLoggedIn;\n\n        if (!isAuthenticated) {\n          this.router.navigate(['/login']);\n        }\n\n        return isAuthenticated;\n      }\n    }]);\n\n    return LoginComponent;\n  }();\n\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 35,\n    vars: 4,\n    consts: [[\"charset\", \"UTF-8\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1\"], [\"rel\", \"stylesheet\", \"href\", \"https://www.w3schools.com/w3css/4/w3.css\"], [\"rel\", \"stylesheet\", \"href\", \"https://fonts.googleapis.com/css?family=Raleway\"], [\"rel\", \"stylesheet\", \"href\", \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\"], [\"href\", \"//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\", \"rel\", \"stylesheet\", \"id\", \"bootstrap-css\"], [\"href\", \"https://fonts.googleapis.com/css?family=Kaushan+Script\", \"rel\", \"stylesheet\"], [\"href\", \"https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css\", \"rel\", \"stylesheet\", \"integrity\", \"sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN\", \"crossorigin\", \"anonymous\"], [\"class\", \"navbar navbar-expand-lg navbar-dark bg-dark\", 4, \"ngIf\"], [1, \"w3-light-pink\"], [1, \"modal-body\"], [\"role\", \"form\", \"ngNativeValidate\", \"\"], [\"frm\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"Email\"], [1, \"glyphicon\", \"glyphicon-mail\"], [\"type\", \"text\", \"ngModel\", \"\", \"name\", \"Email\", \"autocomplete\", \"email\", \"placeholder\", \"Enter email-id\", \"required\", \"\", \"pattern\", \"^\\\\w+([\\\\.-]?\\\\w+)*@\\\\w+([\\\\.-]?\\\\w+)*(\\\\.\\\\w{2,3})+$\", 1, \"form-control\"], [\"emailAddress\", \"ngModel\"], [4, \"ngIf\"], [\"for\", \"pwd\"], [1, \"glyphicon\", \"glyphicon-user\"], [\"type\", \"password\", \"pattern\", \"(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}\", \"required\", \"\", \"ngModel\", \"\", \"name\", \"pwd\", \"autocomplete\", \"pwd\", \"placeholder\", \"Password\", 1, \"form-control\"], [\"pwd\", \"ngModel\"], [\"type\", \"submit\", 1, \"w3-button\", \"w3-block\", \"w3-black\", \"w3-margin-bottom\", 3, \"disabled\", \"click\"], [1, \"navbar\", \"navbar-expand-lg\", \"navbar-dark\", \"bg-dark\"], [\"href\", \"#\", 1, \"navbar-brand\"], [\"type\", \"button\", \"data-toggle\", \"collapse\", \"data-target\", \"#navbarNavAltMarkup\", \"aria-controls\", \"navbarNavAltMarkup\", \"aria-expanded\", \"false\", \"aria-label\", \"Toggle navigation\", 1, \"navbar-toggler\"], [1, \"navbar-toggler-icon\"], [\"id\", \"navbarNavAltMarkup\", 1, \"collapse\", \"navbar-collapse\"], [1, \"navbar-nav\"], [\"routerLink\", \"/login\", 1, \"nav-item\", \"nav-link\"], [1, \"sr-only\"], [\"routerLink\", \"/register\", 1, \"nav-item\", \"nav-link\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        var _r10 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"html\")(1, \"title\");\n        i0.ɵɵtext(2, \"W3.CSS Template\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(3, \"meta\", 0)(4, \"meta\", 1)(5, \"link\", 2)(6, \"link\", 3)(7, \"link\", 4)(8, \"link\", 5)(9, \"link\", 6)(10, \"link\", 7);\n        i0.ɵɵtemplate(11, LoginComponent_nav_11_Template, 13, 0, \"nav\", 8);\n        i0.ɵɵelementStart(12, \"body\", 9)(13, \"h4\")(14, \"i\");\n        i0.ɵɵtext(15, \"WELCOME TO UMD ROYAL ROOMS\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(16, \"div\", 10)(17, \"form\", 11, 12)(19, \"div\", 13)(20, \"label\", 14);\n        i0.ɵɵelement(21, \"span\", 15);\n        i0.ɵɵtext(22, \"Email-Id\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(23, \"input\", 16, 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(25, LoginComponent_div_25_Template, 3, 2, \"div\", 18);\n        i0.ɵɵelementStart(26, \"div\", 13)(27, \"label\", 19);\n        i0.ɵɵelement(28, \"span\", 20);\n        i0.ɵɵtext(29, \"Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(30, \"input\", 21, 22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(32, LoginComponent_div_32_Template, 3, 2, \"div\", 18);\n        i0.ɵɵelementStart(33, \"button\", 23);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_33_listener() {\n          i0.ɵɵrestoreView(_r10);\n\n          var _r1 = i0.ɵɵreference(18);\n\n          return i0.ɵɵresetView(ctx.login(_r1));\n        });\n        i0.ɵɵtext(34, \"Login\");\n        i0.ɵɵelementEnd()()()()();\n      }\n\n      if (rf & 2) {\n        var _r1 = i0.ɵɵreference(18);\n\n        var _r2 = i0.ɵɵreference(24);\n\n        var _r4 = i0.ɵɵreference(31);\n\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isUserLoggedIn);\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"ngIf\", _r2 == null ? null : _r2.touched);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", _r4 == null ? null : _r4.touched);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", _r1.invalid);\n      }\n    },\n    dependencies: [i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.PatternValidator, i4.NgModel, i4.NgForm, i2.RouterLinkWithHref],\n    styles: [\".btn[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:focus{border:1px solid #333;background-color:#fff;color:#000}.modal-header[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], .close[_ngcontent-%COMP%]{background-color:#333;color:#fff!important;text-align:center;font-size:30px}.modal[_ngcontent-%COMP%]{text-align:center;padding:0!important}.modal-dialog[_ngcontent-%COMP%]{margin-left:-40px;margin-top:180px}a[_ngcontent-%COMP%]{text-decoration:none!important}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-family:Kaushan Script,cursive}.myform[_ngcontent-%COMP%]{position:relative;display:flex;padding:1rem;flex-direction:column;width:100%;pointer-events:auto;background-color:#fff;background-clip:padding-box;border:1px solid rgba(175,123,141,.2);border-radius:1.1rem;outline:0;max-width:500px}.tx-tfm[_ngcontent-%COMP%]{text-transform:uppercase}.mybtn[_ngcontent-%COMP%]{border-radius:50px}.login-or[_ngcontent-%COMP%]{position:relative;color:#aaa;margin-top:10px;margin-bottom:10px;padding-top:10px;padding-bottom:10px}.span-or[_ngcontent-%COMP%]{display:block;position:absolute;left:50%;top:-2px;margin-left:-25px;background-color:#fff;width:50px;text-align:center}.hr-or[_ngcontent-%COMP%]{height:1px;margin-top:0!important;margin-bottom:0!important}.google[_ngcontent-%COMP%]{color:#666;width:100%;height:40px;text-align:center;outline:none;border:1px solid lightgrey}form[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red}.modal-dailog[_ngcontent-%COMP%]{width:180px}#second[_ngcontent-%COMP%]{display:none}\", \"body[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%] {font-family: \\\"Raleway\\\", Arial, Helvetica, sans-serif}\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}